<!DOCTYPE HTML>
<html>
<head>
    <title>Generate Lobby Code</title>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            namespace = '/game';

            var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);

            socket.on('connect', function() {
                console.log('Connected!');
            });

            socket.on('hello', function (our_sid) {
                $('#our_sid').val(our_sid);
            });

            socket.on('tagged', function(msg) {
                $('#log').append('<br>' + $('<div/>').text('Tagged by '+msg.by).html());
            });

            $('#join-game').click(function() {
                  socket.emit('join', $('#start_room_name').val());

                  return true;
            })

            $('#start-game').click(function () {
                socket.emit('start', $('#start_room_name').val());
                return false;
            });

            $('#tag-player').click(function () {
                socket.emit('tag', $('#target_sid').val());
                return false;
            })
        });
    </script>
</head>
<body>
    <h1>Generate Lobby Code</h1>
    <p>Async mode is: <b>{{ async_mode }}</b></p>
    <p>Average ping/pong latency: <b><span id="ping-pong"></span>ms</b></p>

    <br>

    <form id="start_room">
        <input type="text" name="start_room_name" id="start_room_name" placeholder="Room Name">
        <input type="text" id="our_sid" placeholder="Our SID">
        <input type="text" id="target_sid" placeholder="Target SID">
        <button type="button" id="join-game">Join Game</button>
        <button type="button" id="start-game">Start Game</button>
        <button type="button" id="tag-player">Send Tag Event</button>
    </form>

    <!--</form>-->
    <h2>Receive:</h2>
    <div id="log"></div>
</body>
</html>
